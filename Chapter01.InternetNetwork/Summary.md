# 인터넷 통신

### 인터넷에서 컴퓨터 둘은 어떻게 통신할까?

<br>

> IP(인터넷 프로토콜)을 기반으로 통신을 한다.

---

# IP(인터넷 프로토콜)

### IP의 역할
> 지정한 주소(IP)에 데이터 전달하며
> 
> 패킷이라는 통신 단위로 데이터를 전달해줌

    A라는 사람과 B라는 사람이 있을 때, 둘이 캐치볼을 하려한다.

    --> 통신을 하려하는 상태
    
    이때 야구공을 주고받을지, 농구공을 주고받을지를 지정하는것

    --> 데이터 단위를 결정하는 것이다. (사용하는 것은 패킷)

### IP 패킷 정보
- 출발지 IP
- 목적지 IP
- 메세지, (기타 ...)

### IP 프로토콜의 한계

#### 1. 비연결성
- 패킷을 받을 대상이 없거나, 불능 상태여도 패킷을 전송한다.

#### 2. 비신뢰성
  - 중간에 패킷이 사라져도 알 수 없음
  - 패킷이 순서대로 오지않아도 알 수 없음

#### 3. 프로그램 구분
  - 같은 IP를 사용하는 서버에서 통신하는 애플리케이션이 둘 이상일때?

---

# TCP, UDP

> IP를 사용할 때 생기는 문제점 개선


## 인터넷 프로토콜 4계층

애플리케이션 계층 - HTTP, FTP <br>

전송 계층 - TCP, UDP <br>

인터넷 계층 - IP <br>

네트워크 인터페이스 계층 <br>


## Scenario 1. [애플리케이션에서 "Hello, Diger" 메세지 전달]

1. SOCKET 라이브러리를 통해 전달 (애플리케이션 계층)

2. TCP 정보 생성, 메시지 데이터 포함 (전송 계층)

3. IP 패킷 생성, TCP 데이터 포함 (인터넷 계층)

4. LAN 카드를 통해 인터넷으로 전달 (네트워크 인터페이스 계층)


## TCP/IP 패킷 정보
> 기존 IP 패킷 정보에 TCP 정보를 추가한다.

### IP 패킷

출발지 IP + 목적지 IP + 메세지(기타 ...)


### TCP 세그먼트

출발지 PORT + 목적지 PORT + 전송 제어 + 순서 + 검증 정보 등...

<br>

> 세그먼트 == IP 에서의 패킷 처럼 TCP 에서 다루는 데이터 단위임

## TCP (Transmission Control Protocol 전송 제어 프로토콜) 특징

- 연결 지향 - TCP 3 way handshake(가상 연결)
- 데이터 전달 보증
- 순서 보장

### 3 way handshake (물리적 연결이 아닌 가상 연결임)

1. SYN (접속 요청)
2. SYN + ACK (접속 요청 및 요청 수락)
3. ACK (요청 수락)

### 데이터 전달 보증

데이터 전송을 한 후, 수신측은 데이터를 전달 받았다는 메세지를 꼭 되돌려줌

### 순서 보장

수신측에서 받은 패킷에 순서가 뒤바뀌어있으면 엉킨 순서부터 다시 보내도록 메세지를 되돌려줌

## UDP (User Datagram Protocol)

- 비 연결지향
- 데이터 전달 비 보증
- 순서 비 보장

> 데이터 전달, 순서가 보장되진 않지만 단순하고 빠르다.
> 
> 또한 IP와 거의 유사하며, PORT 와 체크섬(오류 검출) 의 요소만 추가된다.

> PORT 란? 하나의 IP 에서 여러 애플리케이션을 사용할 수 있도록 한다.
> 
> 나의 IP가 하나의 빌딩이라고 하면 여러개의 출입문을 두는 것이 PORT 이다.


** TCP 프로토콜이 90% 이상을 점유할 정도로 독점 수준이었다.

** 하지만 최근 HTTP3 에서는 UDP 를 사용하면서 점유율이 변화하고 있다.

---

# PORT

> 한 번에 둘 이상 연결해야 할때 어떻게 할 것인가?

### 같은 IP 내에서 프로세스를 구분해주는 역할이 PORT 이다.

--> ex) 게임 서버 연결(PORT = 10000)

--> ex) 웹 브라우저 요청(PORT = 20000)

--> ex) 화상통화 통신 (PORT = 30000)

    서버에서 PORT 를 구분하는 방법은
        
    TCP/IP 패킷을 확인해보면 된다.


### WellKnown PORT (사용하지 않는 것이 좋음)
: 0 ~ 1023

:: 20, 21 FTP

:: 23 TELNET

:: 80 HTTP

:: 443 HTTPS

---

# DNS

> IP는 기억하기 어렵고, 변경될 수 있는 단점이 있다.

## DNS = 전화번호부

<br>

#### ex) 200.123.111.211 의 이름은? -> google.co.kr

### DNS 는 IP를 도메인 이름으로 변환해준다.